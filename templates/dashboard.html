<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Painel Acadêmico - Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body class="dashboard">

    <!-- Cabeçalho -->
    <header class="main-header">
        <h1>Portal Acadêmico - {{ session.nome_curso or 'Seu Curso' }}</h1>
        <div class="header-info">
            <p>Bem-vindo, {{ session.nome_aluno or 'Aluno' }}</p>
            <a href="/logout" class="logout-button">Sair</a>
        </div>
    </header>

    <!-- Navegação -->
    <nav class="main-nav">
        <a href="#" class="active">Início</a>
        <a href="#disciplinas">Disciplinas</a>
        <a href="#eventos">Próximos Eventos</a>
        <a href="#progresso">Progresso</a>
    </nav>

    <!-- Conteúdo Principal -->
    <main>
        <!-- Seção de Disciplinas -->
        <section id="disciplinas">
            <h2>Disciplinas Matriculadas</h2>
            <table class="discipline-table">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Disciplina</th>
                        <th>Professor</th>
                        <th>Horário</th>
                    </tr>
                </thead>
                <tbody>
                    {% if session.disciplinas %}
                        {% for disciplina in session.disciplinas %}
                        <tr>
                            <td>{{ disciplina.codigo }}</td>
                            <td>{{ disciplina.nome }}</td>
                            <td>{{ disciplina.professor }}</td>
                            <td>{{ disciplina.horario }}</td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="4" class="no-data">Nenhuma disciplina encontrada.</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </section>

        <!-- Seção de Próximos Eventos (Agora mostrando as atividades do SIGAA) -->
        <section id="eventos">
            <h2>Próximos Eventos</h2>
            
            {% if session.atividades %}
                <ul class="event-list">
                    {% for atividade in session.atividades %}
                    <li class="{% if atividade.concluida %}evento-concluido{% endif %}">
                        <!-- --- MELHORIA APLICADA AQUI --- -->
                        <!-- Exibe o nome da disciplina em negrito -->
                        <strong>{{ atividade.disciplina_nome }}</strong>
                        <!-- Adiciona uma quebra de linha -->
                        <br>
                        <!-- Exibe a tarefa e a data, sem negrito -->
                        {{ atividade.tarefa_descricao }} – {{ atividade.data }}
                        
                        {% if atividade.prazo_dias %}
                        <span class="evento-prazo">({{ atividade.prazo_dias }} dias restantes)</span>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="no-data">Nenhuma atividade/evento próximo encontrado.</p>
            {% endif %}
        </section>

        <!-- Seção de Progresso (ESTÁTICA) -->
        <section id="progresso">
            <h2>Progresso no Curso</h2>
            <div class="progress-container">
                <p>Curso concluído: 40%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%;"></div>
                </div>
            </div>
        </section>
    </main>
</body>
</html>